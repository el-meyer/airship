<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example - FACTS Data • airship</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Example - FACTS Data">
<meta property="og:description" content="airship">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">airship</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/AIRSHIP-vignette.html">AIRSHIP Manual</a>
    </li>
    <li>
      <a href="../articles/Example1.html">Example - Toy Data</a>
    </li>
    <li>
      <a href="../articles/Example2.html">Example - FACTS Data</a>
    </li>
    <li>
      <a href="../articles/IntegrationFACTS.html">AIRSHIP-FACTS integration</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/el-meyer/airship/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Example - FACTS Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/el-meyer/airship/blob/HEAD/vignettes/Example2.Rmd" class="external-link"><code>vignettes/Example2.Rmd</code></a></small>
      <div class="hidden name"><code>Example2.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>For the purposes of this example, we use a dataset simulated using
the powerful simulation software <a href="https://www.berryconsultants.com/software/facts/" class="external-link">FACTS</a>. When
AIRSHIP is launched from within FACTS, many of the data settings are
populated automatically, here we will show both the FACTS-AIRSHIP
integration and the full manual process. The example dataset as well as
the FACTS file can be downloaded from <a href="https://github.com/el-meyer/airship/tree/master/vignettes/Data" class="external-link">Github</a>.</p>
<div class="section level3">
<h3 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h3>
<p>The data represents simulations from an adaptive clinical trial
design, where we investigate two active treatments against a common
control. Trial participants are allocated equally among all active arms.
The outcome is continuous and observed after 10 weeks. After data on 150
trial participants has been observed, we conduct interim analyses for
the two active treatments with the possibility to stop early for
futility or efficacy. Decisions are based on t-tests, but we also
calculate the corresponding posterior probabilities from an independet
response model. We investigate three different sample sizes for the
whole trial (300, 400, 500), three different treatment effect scenarios
(both active treatments are ineffective, one is effective or both are
effective) and three different recruitment rates (1, 5 or 15 trial
participants enrolled per week).</p>
</div>
<div class="section level3">
<h3 id="manual-upload">Manual upload<a class="anchor" aria-label="anchor" href="#manual-upload"></a>
</h3>
<p>In the “Data” tab, we choose the following settings and upload the
downloaded dataset:</p>
<p><img src="Images/Data1-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
</div>
<div class="section level3">
<h3 id="launch-from-within-facts">Launch from within FACTS<a class="anchor" aria-label="anchor" href="#launch-from-within-facts"></a>
</h3>
<p>After simulating all scenarios and aggregating the data, we can
select “Explore Results” and then “Compare scenarios in Airship”. A
console window opens that runs all the required commands and finally
opens the dataset in AIRSHIP.</p>
<p><img src="Images/Data2-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
<p><img src="Images/Data3-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
</div>
<div class="section level3">
<h3 id="data-inspection">Data inspection<a class="anchor" aria-label="anchor" href="#data-inspection"></a>
</h3>
<p>Notice how when you scroll down, you see two datasets displayed:
“Original Data” and “Summarized Data”. As the dataset we used in this
example contains individual simulation results (in the “Sim” column),
AIRSHIP automatically creates a dataset that summarizes all the outcome
variables across all levels of the input variables (if you are unsure
what that means, refer to the <a href="AIRSHIP-vignette.html">vignette</a>). Different plot tabs will use
different datasets for plotting, e.g. the “Boxplot” and “Scatterplot”
tab will use the “Original Data”, whereas the “Line/Dotplot” tab will
use the “Summarized Data”.</p>
<p><img src="Images/Data2-Example1.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
</div>
</div>
<div class="section level2">
<h2 id="focus-variables">Focus Variables<a class="anchor" aria-label="anchor" href="#focus-variables"></a>
</h2>
<p>For simplicity, we declare all input variables (sample size,
recruitment speed and response profiles) as focus variables (meaning we
don’t want to lump together data across several of the levels of these
variables) and use the first level of each of the input variables as
default values. We can do this by checking the “Use focus variables”
checkbox and clicking the “Take first row of variants as default values”
button.</p>
<p><img src="Images/FocusVariables-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
</div>
<div class="section level2">
<h2 id="boxplot">Boxplot<a class="anchor" aria-label="anchor" href="#boxplot"></a>
</h2>
<p>When selecting the Boxplot tab, a not very meaningful figure is
automatically created. We want to investigate the trial duration, so we
create the following plot:</p>
<p><img src="Images/Boxplot1-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
<p>It becomes apparent that the recruitment speed has the greatest
influence on the trial duration. For every scenario the duration has a
bimodal distribution, meaning we often stopped at interim (at this point
we don’t yet know if we stop for efficacy or futility).</p>
</div>
<div class="section level2">
<h2 id="scatterplot">Scatterplot<a class="anchor" aria-label="anchor" href="#scatterplot"></a>
</h2>
<p>We will now use a scatterplot to further investigate the early
stopping behavior we saw in the boxplot example before. We create the
following plot:</p>
<p><img src="Images/Scatterplot1-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
<p>On the x-axis, we can see trial duration, on the y-axis we see the
p-value of the second arm (i.e. the first of the two treatments), the
different colors correspond to the different possible outcomes of the
trial. Outcome 1 corresponds to early success, outcome 2 corresponds to
late success, outcome 4 to early futility and outcome 7 is inconclusive,
meaning we have not passed the success threshold at final. The three
different columns represent the different response profiles with both
treatments effective in the first column, both ineffective in the second
column and one of them (treatment 2) effective in the third column. In
the boxplot we were wondering about whether out early decisions are
correct and this plot suggests they are.</p>
<p>Let’s remind ourselves that we chose certain default values for the
input variables. In this case, we are plotting the results for a sample
size of 300. If we wanted to see the results for a different sample
size, or across all sample sizes, we could change the selection in the
“Focus Variables” tab. We can always access the specified default values
in the dropdown menu “Default value overview”:</p>
<p><img src="Images/DropdownScatterplot-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
</div>
<div class="section level2">
<h2 id="linedotplot">Line/Dotplot<a class="anchor" aria-label="anchor" href="#linedotplot"></a>
</h2>
<p>In this tab, we can plot the summarized data across the different
levels of focus variables. It also allows us to change the
linetype/shapetype depending on other variables in the dataset. Let’s
create the following plot:</p>
<p><img src="Images/LDPlot1-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
<p>On the y-axis, we get the different success probabilities. In red, we
see the probability that either of the two treatments is declared
effective, in green we see the probability that treatment 1 is declared
effective and in blue the probability that treatment 2 is declared
effective. The columns represent the different response profiles similar
to what we saw in the scatterplot, the x-axis corresponds to final
sample size. In the third column, the green line is perfectly overlaying
the red line. It appears that the success probability for the first
treatment is greater in the third column than in the first column,
likely because the ineffective treatment was stopped early for futility
at interim and the sample size was re-allocated between control and
treatment 1.</p>
<!-- This tab allows us to plot several output variables at the same time. Notice when you add "output2_mean" in "y-axis", the color is automatically assigned to this new variables:  -->
<!-- ![](Images/LDPlot2-Example1.png){#id .class width=100% height=50%} -->
<!-- We can also choose to use color for factor levels similar to the "Boxplot" and "Scatterplot" tabs. In this case, only the first variable assigned to "y-axis" will be plotted: -->
<!-- ![](Images/LDPlot3-Example1.png){#id .class width=100% height=50%} -->
</div>
<div class="section level2">
<h2 id="per-dose-graphs">Per dose graphs<a class="anchor" aria-label="anchor" href="#per-dose-graphs"></a>
</h2>
<p>If we want to create graphs by dose, we firstly need to revisit the
data tab and pivot longer on treatment. In this instance, we know that
we had three treatments (control, active 1 and active 2). We can achieve
this using these settings:</p>
<p><img src="Images/PivotDose1-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
<p>Importantly, we need to let AIRSHIP finish the data processing steps
(as indicated by the busy spinner in the rop right corner and the red
horizontal bar in the top) before we proceed. Failure to wait might
results in AIRSHIP crashing. After we are finished, we see a new column
has appeared in the dataset:</p>
<p><img src="Images/PivotDose2-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
<p>Using this new column allows us to create the following graph:</p>
<p><img src="Images/PivotDose3-Example2.png" id="id" class="class" style="width:100.0%;height:50.0%"></p>
<p>On the x-axis we can see trial duration, on the y-axis the observed
mean respone, color codes the three arms (control in red), the columns
correspond to the respone profiles and the rows to the trial outcomes
(see previous scatterplot tab for an explanation). We can see that there
are only few points in the first column and third row - we make very few
type II errors in this case. When they happen, there is no clear
separation between the observed treatment effects of the three arms.
Another thing we can easily see is that in the null case most stops for
early futility are a result of the observed treatment effect of the
control arm being above those of the treatment arms. Both of these
findings were expected, but it is still good to convince oneself that
the simulations are doing the right thing.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Elias Laurin Meyer, Constantin Kumaus, Michal Majka, Franz Koenig.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
